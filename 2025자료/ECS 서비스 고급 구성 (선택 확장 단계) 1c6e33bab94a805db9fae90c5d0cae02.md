# ECS 서비스 고급 구성 (선택 확장 단계)

### 1. ✅ CloudWatch 로그 연동 (로그 모니터링)

- ECS Task 정의 수정 → **로깅 활성화**
- 로그 드라이버: `awslogs`
- 로그 그룹: `/ecs/golang-app`
- 콘솔 → CloudWatch Logs → 로그 스트림 확인

### 2. ✅ 오토스케일링 설정 (트래픽에 따라 Task 수 자동 조절)

**ECS → 서비스 → 자동 확장 구성:**

| 항목 | 설정 예시 |
| --- | --- |
| 최소 Task 수 | 1 |
| 최대 Task 수 | 3 |
| 트리거 기준 | CPU 사용률 60% 이상 |
| CloudWatch 정책 | 평균 CPU > 60% → +1 Task |

### 3. ✅ 도메인 연결 (Route 53 or 외부 도메인)

- ALB DNS에 Route 53 A레코드 설정 (예: `app.example.com`)
- 또는 외부 도메인 DNS 설정에서 ALB DNS를 CNAME으로 등록

### 4. ✅ HTTPS (SSL) 적용 (ACM 인증서 + HTTPS 리스너 추가)

- ACM에서 무료 인증서 발급 (예: `app.example.com`)
- ALB 리스너 추가 → HTTPS : 443
- 인증서 연결 → 리디렉션 설정도 가능

### 5. ✅ 서비스 유지관리 전략

| 항목 | 설명 |
| --- | --- |
| 무중단 배포 | ECS 서비스에서 Blue/Green 배포 설정 |
| 롤백 정책 | 배포 실패 시 자동 이전 버전 복구 |
| 헬스체크 주기 | ALB 대상 그룹에서 30초 → 10초로 조정 가능 |

## 🎯 마무리 단계 정리

| 실습 단계 | 완료 여부 |
| --- | --- |
| ✅ ECR 이미지 푸시 | 완료 |
| ✅ ECS + Fargate 서비스 배포 | 완료 |
| ✅ ALB 연동 | 완료 |
| ✅ 외부 접속 성공 | 확인 |
| ⬜ CloudWatch 로그 설정 | 선택 적용 |
| ⬜ 오토스케일링 설정 | 선택 적용 |
| ⬜ 도메인 연결 + HTTPS | 선택 적용 |