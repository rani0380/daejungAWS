# AWS Cloud Map

AWS Cloud Mapì€ MSA í™˜ê²½, íŠ¹íˆ ECSë‚˜ EKS ê¸°ë°˜ ì‹œìŠ¤í…œì—ì„œ **ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì„ ì‰½ê²Œ í•˜ê³ , ì„œë¹„ìŠ¤ ìœ„ì¹˜ ë³€ê²½ì—ë„ ìœ ì—°í•˜ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” â€œì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ë„êµ¬â€**ì…ë‹ˆë‹¤.

# âœ… AWS Cloud Mapì˜ í•µì‹¬ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
| --- | --- |
| âœ… **ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬** | ECS, EKSì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ë“¤ì„ **DNS ì´ë¦„ìœ¼ë¡œ ìë™ ë“±ë¡ ë° ê²€ìƒ‰** ê°€ëŠ¥ |
| âœ… **ë‚´ë¶€ DNS ì§€ì›** | VPC ë‚´ë¶€ì—ì„œ `ì„œë¹„ìŠ¤ì´ë¦„.ë„¤ì„ìŠ¤í˜ì´ìŠ¤` í˜•ì‹ì˜ **ë‚´ë¶€ DNS ë ˆì½”ë“œ** ìƒì„± |
| âœ… **ìë™ IP ì—…ë°ì´íŠ¸** | Taskë‚˜ Podê°€ ì¬ì‹œì‘ë  ë•Œ ìë™ìœ¼ë¡œ **IP ì£¼ì†Œ ë³€ê²½ ë°˜ì˜** |
| âœ… **SRV ë ˆì½”ë“œ ì§€ì›** | í¬íŠ¸ ë²ˆí˜¸ê¹Œì§€ í¬í•¨í•œ ì„œë¹„ìŠ¤ ê²€ìƒ‰ ì§€ì› (SRV ë ˆì½”ë“œ ì‚¬ìš© ì‹œ) |
| âœ… **ê±´ê°• ìƒíƒœ ê¸°ë°˜ ë“±ë¡** | ECS/EKS Task ìƒíƒœì— ë”°ë¼ **ì •ìƒ Taskë§Œ ë“±ë¡**í•˜ì—¬ ìš”ì²­ ì‹¤íŒ¨ ìµœì†Œí™” |
| âœ… **EC2, Lambda ë“±ë„ ì§€ì›** | ECS ì™¸ì—ë„ EC2, Lambda, ì˜¨í”„ë ˆë¯¸ìŠ¤ ì„œë¹„ìŠ¤ê¹Œì§€ ìˆ˜ë™ ë“±ë¡ ê°€ëŠ¥ |
| âœ… **CloudWatch í†µí•©** | ì„œë¹„ìŠ¤ ìƒíƒœ, í˜¸ì¶œ í˜„í™© ë“±ì˜ ëª¨ë‹ˆí„°ë§ ì—°ë™ ê°€ëŠ¥ |

# ğŸ§  ì™œ Cloud Mapì´ í•„ìš”í•œê°€?

### ğŸ“Œ MSA(Microservices Architecture) í™˜ê²½ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œ

- ì„œë¹„ìŠ¤ê°€ ìì£¼ ì¬ì‹œì‘ë˜ê³  IPê°€ ë°”ë€œ
- ì—¬ëŸ¬ Taskê°€ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŒ
- IPë¥¼ ì§ì ‘ ì½”ë“œì— ë°•ì•„ë‘ë©´ ê´€ë¦¬ê°€ í˜ë“¦

ğŸ‘‰ Cloud Mapì„ ì“°ë©´ **`user.msa.local`** ê°™ì€ ì´ë¦„ìœ¼ë¡œ ë‚´ë¶€ í†µì‹  ê°€ëŠ¥í•˜ê³ , IPëŠ” ìë™ ì—…ë°ì´íŠ¸ë¨

## ğŸ’¡ Cloud Map ì‘ë™ ì˜ˆì‹œ

1. `auth-service`ê°€ ECSì—ì„œ Fargateë¡œ ì‹¤í–‰ë¨
2. Cloud Mapì€ ì´ë¥¼ `auth.msa.local`ë¡œ ë“±ë¡í•¨
3. `user-service`ëŠ” `http://auth.msa.local:8080/login` ì´ëŸ° ì‹ìœ¼ë¡œ í†µì‹ 

> ì¤‘ê°„ì— IPê°€ ë°”ë€Œì–´ë„ ì½”ë“œ ìˆ˜ì • ì—†ì´ ê³„ì† ë™ì‘
> 

## ğŸ”— Cloud Mapì€ ëˆ„ê°€ ì‚¬ìš©í•˜ë‚˜ìš”?

| í”Œë«í¼ | ì‚¬ìš© ì˜ˆ |
| --- | --- |
| ECS + Fargate | Task IP ìë™ DNS ë“±ë¡ |
| EKS (Kubernetes) | CoreDNS ê¸°ë°˜ ë‚´ë¶€ ì´ë¦„ ë“±ë¡ |
| EC2 ìˆ˜ë™ ë“±ë¡ | EC2 Private IPë¥¼ ë“±ë¡í•˜ê³  DNS ì´ë¦„ìœ¼ë¡œ ì ‘ê·¼ |
| Service Mesh | App Meshì™€ ì—°ë™í•˜ì—¬ ë””ìŠ¤ì»¤ë²„ë¦¬ + íŠ¸ë˜í”½ ê´€ë¦¬ |

> Cloud Map = AWS ë‚´ë¶€ DNS ê¸°ë°˜ ì„œë¹„ìŠ¤ ì£¼ì†Œ ìë™ ë“±ë¡ + ê²€ìƒ‰ ì‹œìŠ¤í…œ
> 
- MSA êµ¬ì¡°ì—ì„œ **ì„œë¹„ìŠ¤ ê°„ ìœ ë™ì ì¸ ì—°ê²°**ì„ ê°€ëŠ¥í•˜ê²Œ í•¨
- ECSì™€ ì—°ë™ ì‹œ **ìë™ ë“±ë¡/ì œê±°**ê°€ í•µì‹¬ ê¸°ëŠ¥
- `auth.msa.local`, `user.msa.local` ì´ëŸ° ì‹ì˜ **ë‚´ë¶€ DNS ë„¤ì„ìœ¼ë¡œ í†µì‹ **

[**ECS + Cloud Map**ì„ ì—°ë™í•´ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ êµ¬ì¡°](AWS%20Cloud%20Map/ECS%20+%20Cloud%20Map%EC%9D%84%20%EC%97%B0%EB%8F%99%ED%95%B4%20%EC%84%9C%EB%B9%84%EC%8A%A4%20%EB%94%94%EC%8A%A4%EC%BB%A4%EB%B2%84%EB%A6%AC%20%EA%B8%B0%EB%8A%A5%EC%9D%84%20%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%20%EA%B0%80%EC%9E%A5%20%EA%B8%B0%EB%B3%B8%EC%A0%81%EC%9D%B8%20%EA%B5%AC%EC%A1%B0%201c6e33bab94a80c9b2f8fd3291935182.md)

[Terraform êµ¬ì„±: ECS + Fargate + CloudMap ê¸°ë°˜ MSA ì¸í”„ë¼ ì˜ˆì œ](AWS%20Cloud%20Map/Terraform%20%EA%B5%AC%EC%84%B1%20ECS%20+%20Fargate%20+%20CloudMap%20%EA%B8%B0%EB%B0%98%20MSA%20%EC%9D%B8%ED%94%84%EB%9D%BC%20%EC%98%88%201c6e33bab94a80fa90e9c0a58eafa22b.md)